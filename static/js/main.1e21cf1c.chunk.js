(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a(36)},26:function(e,t,a){},28:function(e,t,a){},30:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(16),i=a.n(l),o=a(38),s=a(40),c=a(39);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(26);var u=a(3),m=a(4),h=a(7),p=a(6),d=a(8),b=(a(28),a(30),a(37)),v=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"layout"},r.a.createElement("a",{href:"#menu",id:"menuLink",className:"menu-link"},r.a.createElement("span",null)),r.a.createElement("div",{id:"menu"},r.a.createElement("div",{className:"pure-menu"},r.a.createElement("a",{className:"pure-menu-heading",href:"#"},"Company"),r.a.createElement("ul",{className:"pure-menu-list"},r.a.createElement("li",{className:"pure-menu-item"},r.a.createElement(b.a,{to:"/",className:"pure-menu-link"},"Home")),r.a.createElement("li",{className:"pure-menu-item"},r.a.createElement(b.a,{to:"/autor",className:"pure-menu-link"},"Autor")),r.a.createElement("li",{className:"pure-menu-item"},r.a.createElement(b.a,{to:"/livro",className:"pure-menu-link"},"Livro"))))),r.a.createElement("div",{id:"main"},this.props.children))}}]),t}(n.Component),E=a(17),f=a(5),j=a(12),O=a.n(j),y=a(10),k=a.n(y),N=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(p.a)(t).call(this))).state={msgErro:""},e}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:this.props.id},this.props.label),r.a.createElement("input",this.props),r.a.createElement("span",{className:"error"},this.state.msgErro))}},{key:"componentDidMount",value:function(){k.a.subscribe("erro-validacao",function(e,t){t.field===this.props.name&&this.setState({msgErro:t.defaultMessage})}.bind(this)),k.a.subscribe("limpa-erros",function(e){this.setState({msgErro:""})}.bind(this))}}]),t}(n.Component),S=function(){function e(){Object(u.a)(this,e)}return Object(m.a)(e,[{key:"publicaErros",value:function(e){for(var t=0;t<e.errors.length;t++){var a=e.errors[t];k.a.publish("erro-validacao",a)}}}]),e}(),g=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(p.a)(t).call(this))).state={nome:"",email:"",senha:""},e.enviaForm=e.enviaForm.bind(Object(f.a)(Object(f.a)(e))),e.salvaAlteracao=e.salvaAlteracao.bind(Object(f.a)(Object(f.a)(e))),e}return Object(d.a)(t,e),Object(m.a)(t,[{key:"salvaAlteracao",value:function(e,t){this.setState(Object(E.a)({},e,t.target.value))}},{key:"enviaForm",value:function(e){e.preventDefault(),O.a.ajax({url:"https://cdc-react.herokuapp.com/api/autores",contentType:"application/json",dataType:"json",type:"post",data:JSON.stringify({nome:this.state.nome,email:this.state.email,senha:this.state.senha}),success:function(e){k.a.publish("atualiza-lista-autores",e),this.setState({nome:"",email:"",senha:""})}.bind(this),error:function(e){400===e.status&&(new S).publicaErros(e.responseJSON)},beforeSend:function(){k.a.publish("limpa-erros",{})}})}},{key:"setNome",value:function(e){this.setState({nome:e.target.value})}},{key:"setEmail",value:function(e){this.setState({email:e.target.value})}},{key:"setSenha",value:function(e){this.setState({senha:e.target.value})}},{key:"render",value:function(){return r.a.createElement("div",{className:"pure-form pure-form-aligned"},r.a.createElement("form",{className:"pure-form pure-form-aligned",onSubmit:this.enviaForm,method:"post"},r.a.createElement(N,{id:"nome",type:"text",name:"nome",value:this.state.nome,onChange:this.salvaAlteracao.bind(this,"nome"),label:"Nome"}),r.a.createElement(N,{id:"email",type:"email",name:"email",value:this.state.email,onChange:this.salvaAlteracao.bind(this,"email"),label:"Email"}),r.a.createElement(N,{id:"senha",type:"password",name:"senha",value:this.state.senha,onChange:this.salvaAlteracao.bind(this,"senha"),label:"Senha"}),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",null),r.a.createElement("button",{type:"submit",className:"pure-button pure-button-primary"},"Gravar"))))}}]),t}(n.Component),C=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("table",{className:"pure-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Nome"),r.a.createElement("th",null,"email"))),r.a.createElement("tbody",null,this.props.lista.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.nome),r.a.createElement("td",null,e.email))}))))}}]),t}(n.Component),w=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(p.a)(t).call(this))).state={lista:[]},e}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){O.a.ajax({url:"https://cdc-react.herokuapp.com/api/autores",dataType:"json",success:function(e){this.setState({lista:e})}.bind(this)}),k.a.subscribe("atualiza-lista-autores",function(e,t){this.setState({lista:t})}.bind(this))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"Cadastro de autores")),r.a.createElement("div",{className:"content",id:"content"},r.a.createElement(g,null),r.a.createElement(C,{lista:this.state.lista})))}}]),t}(n.Component),T=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={titulo:"",preco:"",autorId:""},a.setTitulo=a.setTitulo.bind(Object(f.a)(Object(f.a)(a))),a.setPreco=a.setPreco.bind(Object(f.a)(Object(f.a)(a))),a.setAutorId=a.setAutorId.bind(Object(f.a)(Object(f.a)(a))),a.handleLivroSubmit=a.handleLivroSubmit.bind(Object(f.a)(Object(f.a)(a))),a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"setTitulo",value:function(e){this.setState({titulo:e.target.value})}},{key:"setPreco",value:function(e){this.setState({preco:e.target.value})}},{key:"setAutorId",value:function(e){this.setState({autorId:e.target.value})}},{key:"handleLivroSubmit",value:function(e){e.preventDefault();var t=this.state.titulo.trim(),a=this.state.preco.trim(),n=this.state.autorId;O.a.ajax({url:"https://cdc-react.herokuapp.com/api/livros",contentType:"application/json",dataType:"json",type:"POST",data:JSON.stringify({titulo:t,preco:a,autorId:n}),success:function(e){k.a.publish("atualiza-lista-livros",e),this.setState({titulo:"",preco:"",autorId:""})}.bind(this),error:function(e){400===e.status&&(new S).publicaErros(e.responseJSON)},beforeSend:function(){k.a.publish("limpa-erros",{})}}),this.setState({titulo:"",preco:"",autorId:""})}},{key:"render",value:function(){var e=this.props.autores.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.nome)});return r.a.createElement("div",{className:"autorForm"},r.a.createElement("form",{className:"pure-form pure-form-aligned",onSubmit:this.handleLivroSubmit},r.a.createElement(N,{id:"titulo",name:"titulo",label:"Titulo: ",type:"text",value:this.state.titulo,placeholder:"Titulo do livro",onChange:this.setTitulo}),r.a.createElement(N,{id:"preco",name:"preco",label:"Preco: ",type:"decimal",value:this.state.preco,placeholder:"Pre\xe7o do livro",onChange:this.setPreco}),r.a.createElement("div",{className:"pure-controls"},r.a.createElement("select",{value:this.state.autorId,name:"autorId",onChange:this.setAutorId},r.a.createElement("option",{value:""},"Selecione"),e)),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",null),r.a.createElement("button",{type:"submit",className:"pure-button pure-button-primary"},"Gravar"))))}}]),t}(n.Component),I=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.lista.map(function(e){return r.a.createElement("tr",{key:e.titulo},r.a.createElement("td",null,e.titulo),r.a.createElement("td",null,e.autor.nome),r.a.createElement("td",null,e.preco))});return r.a.createElement("table",{className:"pure-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Titulo"),r.a.createElement("th",null,"Autor"),r.a.createElement("th",null,"Preco"))),r.a.createElement("tbody",null,e))}}]),t}(n.Component),A=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={lista:[],autores:[]},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){O.a.ajax({url:"https://cdc-react.herokuapp.com/api/livros",dataType:"json",success:function(e){this.setState({lista:e})}.bind(this)}),O.a.ajax({url:"https://cdc-react.herokuapp.com/api/autores",dataType:"json",success:function(e){this.setState({autores:e})}.bind(this)}),k.a.subscribe("atualiza-lista-livros",function(e,t){this.setState({lista:t})}.bind(this))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"Cadastro de Livros")),r.a.createElement("div",{className:"content",id:"content"},r.a.createElement(T,{autores:this.state.autores}),r.a.createElement(I,{lista:this.state.lista})))}}]),t}(n.Component),x=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"Bem vindo ao sistema")),r.a.createElement("div",{className:"content",id:"content"}))}}]),t}(n.Component);i.a.render(r.a.createElement(o.a,null,r.a.createElement(v,null,r.a.createElement(s.a,null,r.a.createElement(c.a,{exact:!0,path:"/",component:x}),r.a.createElement(c.a,{path:"/autor",component:w}),r.a.createElement(c.a,{path:"/livro",component:A})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[20,2,1]]]);
//# sourceMappingURL=main.1e21cf1c.chunk.js.map